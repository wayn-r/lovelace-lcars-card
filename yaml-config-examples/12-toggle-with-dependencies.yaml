type: custom:lovelace-lcars-card
card_title: "Toggle with Dependencies Example"

# LCARS-specific configuration
lcars_config:
  state_management:
    # Button A: Toggle group_a and manage button visibility
    global_interactions:
      visibility_triggers:
        - trigger_source:
            element_id_ref: "nav.button_a"
            event: "click"
          orchestrated_action:
            type: "toggle_with_dependencies"
            primary_target:
              type: "group"
              id: "group_a"
            when_showing:
              hide:
                - type: "element"
                  id: "nav.button_b"
                - type: "element"
                  id: "nav.button_c"
            when_hiding:
              show:
                - type: "element"
                  id: "nav.button_b"
                - type: "element"
                  id: "nav.button_c"
            timing:
              hide_first: true
              show_delay: 250

groups:
  - group_id: "nav"
    elements:
      - id: "title_display"
        type: "rectangle"
        appearance:
          fill: "#FF9900"
        text:
          content: "Toggle with Dependencies Example"
          fill: "#000000"
          fontSize: 16
          fontWeight: "bold"
          fontFamily: "Antonio"
        layout:
          width: 400
          height: 40
      - id: "button_a"
        type: "rectangle"
        appearance:
          fill: "#FF9900"
        text:
          content: "TOGGLE A"
          fill: "#000000"
          fontFamily: "Antonio"
        layout:
          width: 100
          height: 40
          anchor:
            to: "nav.title_display"
            element_point: "topLeft"
            target_point: "bottomLeft"
        interactions:
          button:
            enabled: true
            appearance_states:
              hover:
                appearance:
                  fill: "#FFCC66"
      
      - id: "button_b"
        type: "rectangle"
        appearance:
          fill: "#0099CC"
        text:
          content: "BUTTON B"
          fill: "#FFFFFF"
          fontFamily: "Antonio"
        layout:
          width: 100
          height: 40
          anchor:
            to: "nav.button_a"
            element_point: "topLeft"
            target_point: "topRight"
        interactions:
          button:
            enabled: true
      
      - id: "button_c"
        type: "rectangle"
        appearance:
          fill: "#CC3300"
        text:
          content: "BUTTON C"
          fill: "#FFFFFF"
          fontFamily: "Antonio"
        layout:
          width: 100
          height: 40
          anchor:
            to: "nav.button_b"
            element_point: "topLeft"
            target_point: "topRight"
        interactions:
          button:
            enabled: true

  - group_id: "group_a"
    elements:
      - id: "panel_a"
        type: "rectangle"
        appearance:
          fill: "#666666"
        text:
          content: "GROUP A ACTIVE\nButtons B & C are hidden"
          fill: "#FFFFFF"
          fontFamily: "Antonio"
        layout:
          width: 300
          height: 80
          anchor:
            to: "nav.button_a"
            element_point: "topLeft"
            target_point: "bottomLeft"